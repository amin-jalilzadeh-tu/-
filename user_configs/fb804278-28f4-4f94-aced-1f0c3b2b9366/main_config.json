{
  "main_config": {
    "paths": {
      "building_data": "data/df_buildings.csv",
      "fenez_excel": "excel_data/envelop.xlsx",
      "dhw_excel": "excel_data/dhw_overrides.xlsx",
      "epw_excel": "excel_data/epw_overrides.xlsx",
      "lighting_excel": "excel_data/lighting_overrides.xlsx",
      "hvac_excel": "excel_data/hvac_overrides.xlsx",
      "vent_excel": "excel_data/vent_overrides.xlsx"
    },
    "use_database": false,
    "filter_by": "meestvoorkomendepostcode",
    "db_filter": {
      "meestvoorkomendepostcode": [
        "3066HG"
      ],
      "pand_id": [
        "0383100000001369",
        "0383100000001370",
        "5473VX"
      ],
      "pand_ids": [
        "XYZ123",
        "XYZ999"
      ],
      "bbox_xy": [
        120000.0,
        487000.0,
        121000.0,
        488000.0
      ],
      "bbox_latlon": [
        51.873,
        5.589,
        51.878,
        5.6
      ]
    },
    "excel_overrides": {
      "override_fenez_excel": false,
      "override_dhw_excel": false,
      "override_epw_excel": false,
      "override_lighting_excel": false,
      "override_hvac_excel": false,
      "override_vent_excel": false
    },
    "user_config_overrides": {
      "override_fenez_json": true,
      "override_dhw_json": true,
      "override_epw_json": true,
      "override_lighting_json": true,
      "override_hvac_json": true,
      "override_vent_json": true,
      "override_geometry_json": true,
      "override_shading_json": true
    },
    "idf_creation": {
      "perform_idf_creation": true,
      "scenario": "scenario1",
      "calibration_stage": "pre_calibration",
      "strategy": "B",
      "random_seed": 42,
      "iddfile": "EnergyPlus/Energy+.idd",
      "idf_file_path": "EnergyPlus/Minimal.idf",
      "output_idf_dir": "output_IDFs",
      "run_simulations": true,
      "simulate_config": {
        "num_workers": 4,
        "ep_force_overwrite": true
      },
      "post_process": true,
      "post_process_config": {
        "base_output_dir": "Sim_Results",
        "outputs": [
          {
            "convert_to_daily": true,
            "convert_to_monthly": false,
            "aggregator": "none",
            "output_csv": "output/results/merged_as_is.csv"
          },
          {
            "convert_to_daily": true,
            "convert_to_monthly": false,
            "aggregator": "mean",
            "output_csv": "output/results/merged_daily_mean.csv"
          },
          {
            "convert_to_daily": true,
            "convert_to_monthly": true,
            "aggregator": "mean",
            "output_csv": "output/results/merged_monthly_mean.csv"
          }
        ]
      },
      "output_definitions": {
        "desired_variables": [
          "Facility Total Electric Demand Power",
          "Zone Air Temperature",
          "Boiler Heating Energy",
          "Water Heater Heating Energy"
        ],
        "desired_meters": [
          "Electricity:Facility",
          "Heating:EnergyTransfer",
          "Cooling:EnergyTransfer"
        ],
        "override_variable_frequency": "Daily",
        "override_meter_frequency": "Daily",
        "include_tables": true,
        "include_summary": true
      }
    },
    "structuring": {
      "perform_structuring": true,
      "dhw": {
        "csv_in": "assigned/assigned_dhw_params.csv",
        "csv_out": "assigned/structured_dhw_params.csv"
      },
      "fenestration": {
        "csv_in": "assigned/assigned_fenez_params.csv",
        "csv_out": "assigned/structured_fenez_params.csv"
      },
      "hvac": {
        "csv_in": "assigned/assigned_hvac_params.csv",
        "build_out": "assigned/assigned_hvac_building.csv",
        "zone_out": "assigned/assigned_hvac_zones.csv"
      },
      "vent": {
        "csv_in": "assigned/assigned_ventilation.csv",
        "build_out": "assigned/assigned_vent_building.csv",
        "zone_out": "assigned/assigned_vent_zones.csv"
      },
      "shading": {
        "csv_in": "assigned/assigned_shading_params.csv",
        "csv_out": "assigned/structured_shading_params.csv"
      },
      "equipment": {
        "csv_in": "assigned/assigned_equipment.csv",
        "csv_out": "assigned/structured_equipment.csv"
      },
      "zone_sizing": {
        "csv_in": "assigned/assigned_zone_sizing_outdoor_air.csv",
        "csv_out": "assigned/structured_zone_sizing.csv"
      }
    },
    "modification": {
      "perform_modification": true,
      "modify_config": {
        "idd_path": "EnergyPlus/Energy+.idd",
        "assigned_csv": {
          "hvac_building": "assigned/assigned_hvac_building.csv",
          "hvac_zones": "assigned/assigned_hvac_zones.csv",
          "dhw": "assigned/assigned_dhw_params.csv",
          "vent_build": "assigned/assigned_vent_building.csv",
          "vent_zones": "assigned/assigned_vent_zones.csv",
          "elec": "assigned/assigned_lighting.csv",
          "fenez": "assigned/structured_fenez_params.csv",
          "shading": "assigned/structured_shading_params.csv",
          "equip": "assigned/structured_equipment.csv",
          "zone_sizing": "assigned/structured_zone_sizing.csv"
        },
        "scenario_csv": {
          "hvac": "scenarios/scenario_params_hvac.csv",
          "dhw": "scenarios/scenario_params_dhw.csv",
          "vent": "scenarios/scenario_params_vent.csv",
          "elec": "scenarios/scenario_params_elec.csv",
          "fenez": "scenarios/scenario_params_fenez.csv",
          "shading": "scenarios/scenario_params_shading.csv",
          "equip": "scenarios/scenario_params_equipment.csv",
          "zone_sizing": "scenarios/scenario_params_zone_sizing.csv"
        },
        "output_idf_dir": "scenario_idfs",
        "building_id": 4136733,
        "num_scenarios": 100,
        "picking_method": "random_uniform",
        "picking_scale_factor": 0.5,
        "run_simulations": true,
        "simulation_config": {
          "num_workers": 4,
          "output_dir": "Sim_Results/Scenarios"
        },
        "perform_post_process": true,
        "post_process_config": {
          "output_csv_as_is": "results_scenarioes/merged_as_is_scenarios.csv",
          "output_csv_daily_mean": "results_scenarioes/merged_daily_mean_scenarios.csv"
        },
        "perform_validation": false,
        "validation_config": {
          "real_data_csv": "data/mock_merged_daily_mean.csv",
          "sim_data_csv": "results/merged_daily_mean.csv",
          "bldg_ranges": {
            "0": [
              0,
              1,
              2
            ]
          },
          "variables_to_compare": [
            "Electricity:Facility [J](Hourly)",
            "Heating:EnergyTransfer [J](Hourly)",
            "Cooling:EnergyTransfer [J](Hourly)"
          ],
          "threshold_cv_rmse": 30.0,
          "skip_plots": true,
          "output_csv": "scenario_validation_report.csv"
        }
      }
    },
    "validation_base": {
      "perform_validation": true,
      "config": {
        "real_data_csv": "data/mock_merged_daily_mean.csv",
        "sim_data_csv": "results/merged_daily_mean.csv",
        "bldg_ranges": {
          "0": [
            0,
            1,
            2,
            3
          ]
        },
        "variables_to_compare": [
          "Electricity:Facility [J](Hourly)",
          "Heating:EnergyTransfer [J](Hourly)",
          "Cooling:EnergyTransfer [J](Hourly)"
        ],
        "threshold_cv_rmse": 30.0,
        "skip_plots": true,
        "output_csv": "validation_report_base.csv",
        "analysis_options": {
          "date_format": [
            "%d/%m/%Y %H:%M",
            "%d/%m/%y",
            "%Y-%m-%d %H:%M:%S"
          ],
          "granularity": [
            "annual",
            "monthly",
            "seasonal"
          ],
          "weekday_weekend": true,
          "diurnal_profiles": true,
          "peak_analysis": {
            "perform": true,
            "n_peaks": 10
          },
          "ramp_rate_analysis": true,
          "extreme_day_analysis": {
            "perform": true,
            "n_days": 5,
            "weather_variable": "Environment:Site Outdoor Air Drybulb Temperature [C](Daily)"
          }
        }
      }
    },
    "validation_scenarios": {
      "perform_validation": false,
      "config": {
        "real_data_csv": "data/mock_merged_daily_mean.csv",
        "sim_data_csv": "results_scenarioes/merged_daily_mean_scenarios.csv",
        "bldg_ranges": {
          "0": [
            0,
            1,
            2
          ]
        },
        "variables_to_compare": [
          "Electricity:Facility [J](Hourly)",
          "Heating:EnergyTransfer [J](Hourly)",
          "Cooling:EnergyTransfer [J](Hourly)"
        ],
        "threshold_cv_rmse": 30.0,
        "skip_plots": true,
        "output_csv": "validation_report_scenarios.csv"
      }
    },
    "// ENHANCED SENSITIVITY V1": "Uses time slicing and parameter filtering",
    "sensitivity": {
      "perform_sensitivity": true,
      "scenario_folder": "scenarios",
      "method": "correlation",
      "results_csv": "results_scenarioes/merged_daily_mean_scenarios.csv",
      "target_variable": [
        "Heating:EnergyTransfer [J](Hourly)",
        "Cooling:EnergyTransfer [J](Hourly)",
        "Electricity:Facility [J](Hourly)"
      ],
      "output_csv": "enhanced_sensitivity.csv",
      "// Time slice configuration - focus on peak hours": "",
      "time_slice_config": {
        "method": "custom",
        "custom_config": {
          "hours": [
            7,
            8,
            9,
            14,
            15,
            16,
            17,
            18,
            19
          ],
          "weekdays_only": true
        }
      },
      "// Parameter filtering": "",
      "file_patterns": [
        "*hvac*.csv",
        "*dhw*.csv",
        "*equipment*.csv"
      ],
      "param_filters": {
        "param_name_contains": [
          "setpoint",
          "temperature",
          "wm2",
          "flow"
        ],
        "exclude_params": [
          "roughness"
        ]
      }
    },
    "// ENHANCED SURROGATE V1": "Uses automated ML and feature selection",
    "surrogate": {
      "perform_surrogate": true,
      "scenario_folder": "scenarios",
      "results_csv": "results_scenarioes/merged_daily_mean_scenarios.csv",
      "target_variable": [
        "Heating:EnergyTransfer [J](Hourly)",
        "Cooling:EnergyTransfer [J](Hourly)",
        "Electricity:Facility [J](Hourly)"
      ],
      "model_out": "enhanced_multi_output_surrogate.joblib",
      "cols_out": "enhanced_multi_output_columns.joblib",
      "test_size": 0.2,
      "// Automated ML configuration": "",
      "automated_ml": true,
      "model_types": [
        "random_forest",
        "xgboost",
        "gradient_boosting"
      ],
      "scale_features": true,
      "cv_strategy": "kfold",
      "// Feature selection from sensitivity": "",
      "sensitivity_results_path": "enhanced_sensitivity.csv",
      "feature_selection": {
        "method": "correlation",
        "top_n": 20
      },
      "// Time aggregation": "",
      "time_aggregation": "sum",
      "save_metadata": true
    },
    "// ENHANCED CALIBRATION V1": "Uses PSO and multi-objective optimization",
    "calibration": {
      "perform_calibration": true,
      "scenario_folder": "scenarios",
      "method": "pso",
      "use_surrogate": true,
      "real_data_csv": "data/mock_merged_daily_mean.csv",
      "surrogate_model_path": "enhanced_multi_output_surrogate.joblib",
      "surrogate_columns_path": "enhanced_multi_output_columns.joblib",
      "// Multi-variable calibration": "",
      "target_variables": [
        "Heating:EnergyTransfer [J](Hourly)",
        "Cooling:EnergyTransfer [J](Hourly)",
        "Electricity:Facility [J](Hourly)"
      ],
      "// PSO configuration": "",
      "algorithm_config": {
        "pso": {
          "n_particles": 50,
          "max_iter": 100,
          "inertia": 0.9,
          "inertia_decay": 0.99,
          "cognitive": 2.0,
          "social": 2.0
        }
      },
      "// Multi-objective setup": "",
      "objectives": [
        {
          "target_variable": "Heating:EnergyTransfer [J](Hourly)",
          "metric": "cvrmse",
          "weight": 0.35,
          "tolerance": 25.0
        },
        {
          "target_variable": "Cooling:EnergyTransfer [J](Hourly)",
          "metric": "cvrmse",
          "weight": 0.35,
          "tolerance": 25.0
        },
        {
          "target_variable": "Electricity:Facility [J](Hourly)",
          "metric": "cvrmse",
          "weight": 0.3,
          "tolerance": 20.0
        }
      ],
      "// Parameter filtering using sensitivity results": "",
      "subset_sensitivity_csv": "enhanced_sensitivity.csv",
      "top_n_params": 15,
      "calibrate_min_max": true,
      "// Validation to prevent overfitting": "",
      "validation": {
        "cross_validate": true,
        "n_folds": 3,
        "overfitting_threshold": 0.15
      },
      "output_history_csv": "enhanced_calibration_history.csv",
      "best_params_folder": "calibrated_enhanced",
      "history_folder": "calibrated_enhanced"
    }
  }
}