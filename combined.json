{
  "dhw": [
    {
      "building_id": 413673000,
      "param_name": "occupant_density_m2_per_person",
      "min_val": 127.0,
      "max_val": 233.0
    },
    {
      "building_id": 413673000,
      "param_name": "liters_per_person_per_day",
      "fixed_value": 145.0
    },
    {
      "building_function": "residential00",
      "age_range": "1992-2005",
      "param_name": "setpoint_c",
      "min_val": 58.0,
      "max_val": 60.0
    },
    {
      "building_function": "non_residential000",
      "param_name": "occupant_density_m2_per_person",
      "min_val": 12.0,
      "max_val": 18.0
    }
  ],
  "epw": [
    {
      "building_id": 413673000,
      "fixed_epw_path": "data/weather/2050.epw"
    },
    {
      "desired_year": 2050,
      "override_year_to": 2020
    }
  ],
  "zone_sizing": [
    {
      "param_name": "cooling_supply_air_temp",
      "min_val": 12.0,
      "max_val": 15.0
    },
    {
      "param_name": "heating_supply_air_temp",
      "min_val": 40.0,
      "max_val": 50.0
    },
    {
      "param_name": "cooling_supply_air_hr",
      "min_val": 0.008,
      "max_val": 0.010
    },
    {
      "param_name": "heating_supply_air_hr",
      "min_val": 0.003,
      "max_val": 0.005
    },
    {
      "param_name": "cooling_design_air_flow_method",
      "choices": [
        "Flow/Zone",
        "DesignDay",
        "DesignDayWithLimit"
      ]
    }
  ],
  "equipment": [
    {
      "param_name": "equip_wm2",
      "min_val": 3.0,
      "max_val": 7.0
    },
    {
      "param_name": "tD",
      "description": "Schedule value for day occupancy (W)",
      "min_val": 400.0,
      "max_val": 800.0
    },
    {
      "param_name": "tN",
      "description": "Schedule value for night occupancy (W)",
      "min_val": 150.0,
      "max_val": 350.0
    }
  ],
  "shading": [
    {
      "param_name": "slat_angle_deg",
      "min_val": 30.0,
      "max_val": 60.0
    },
    {
      "param_name": "slat_beam_solar_reflectance",
      "min_val": 0.6,
      "max_val": 0.8
    },
    {
      "param_name": "blind_to_glass_distance",
      "fixed_value": 0.075
    },
    {
      "param_name": "slat_width",
      "min_val": 0.020,
      "max_val": 0.030
    }
  ],
  "mail_user": [
    {
      "email": "amin.jalilzade1@gmail.com"
    }
  ],
  "fenestration": [
    {
      "building_id": 413673000,
      "building_function": "residential",
      "building_type": "Two-and-a-half-story House",
      "age_range": "1992-2005",
      "scenario": "scenario1",
      "param_name": "wwr",
      "min_val": 0.025,
      "max_val": 0.03
    },
    {
      "building_function": "non_residential0",
      "age_range": "2015 and later",
      "scenario": "scenario1",
      "param_name": "roof_R_value",
      "fixed_value": 3.0
    }
  ],
  "geometry": [
    {
      "building_id": 413673,
      "param_name": "perimeter_depth",
      "min_val": 3.5,
      "max_val": 4.0,
      "fixed_value": true
    },
    {
      "building_id": 4136733,
      "param_name": "has_core",
      "fixed_value": true
    },
    {
      "building_id": 4136737,
      "param_name": "has_core",
      "fixed_value": false
    },
    {
      "building_type": "Meeting Function",
      "param_name": "has_core",
      "fixed_value": true
    },
    {
      "building_id": 4136738,
      "param_name": "has_core",
      "fixed_value": false
    }
  ],
  "hvac": [
    {
      "building_id": 413673000,
      "param_name": "heating_day_setpoint",
      "min_val": 10.0,
      "max_val": 11.0
    },
    {
      "building_function": "residential0",
      "param_name": "cooling_day_setpoint",
      "fixed_value": 25.6
    },
    {
      "scenario": "scenario10",
      "age_range": "2015 and later",
      "param_name": "max_heating_supply_air_temp",
      "min_val": 48.6,
      "max_val": 50.0
    }
  ],
  "lighting": [
    {
      "building_id": 413673000,
      "param_name": "lights_wm2",
      "min_val": 18.0,
      "max_val": 20.0
    },
    {
      "building_type": "Residential0",
      "param_name": "tN",
      "min_val": 10999,
      "max_val": 11999
    },
    {
      "building_id": 4136731,
      "building_type": "non_residential",
      "param_name": "parasitic_wm2",
      "min_val": 0.28,
      "max_val": 0.3
    }
  ],
  "main_config": {
    "paths": {
      "building_data": "data/df_buildings.csv",
      "fenez_excel": "excel_data/envelop.xlsx",
      "dhw_excel": "excel_data/dhw_overrides.xlsx",
      "epw_excel": "excel_data/epw_overrides.xlsx",
      "lighting_excel": "excel_data/lighting_overrides.xlsx",
      "hvac_excel": "excel_data/hvac_overrides.xlsx",
      "vent_excel": "excel_data/vent_overrides.xlsx"
    },
    "use_database": false,
    "filter_by": "meestvoorkomendepostcode",
    "db_filter": {
      "meestvoorkomendepostcode": [
        "3066HG"
      ],
      "pand_id": [
        "0383100000001369",
        "0383100000001370",
        "5473VX"
      ],
      "pand_ids": [
        "XYZ123",
        "XYZ999"
      ],
      "bbox_xy": [
        120000.0,
        487000.0,
        121000.0,
        488000.0
      ],
      "bbox_latlon": [
        51.873,
        5.589,
        51.878,
        5.6
      ]
    },
    "excel_overrides": {
      "override_fenez_excel": false,
      "override_dhw_excel": false,
      "override_epw_excel": false,
      "override_lighting_excel": false,
      "override_hvac_excel": false,
      "override_vent_excel": false
    },
    "user_config_overrides": {
      "override_fenez_json": true,
      "override_dhw_json": true,
      "override_epw_json": true,
      "override_lighting_json": true,
      "override_hvac_json": true,
      "override_vent_json": true,
      "override_geometry_json": true,
      "override_shading_json": true
    },
    "idf_creation": {
      "perform_idf_creation": true,
      "scenario": "scenario1",
      "calibration_stage": "pre_calibration",
      "strategy": "B",
      "random_seed": 42,
      "iddfile": "EnergyPlus/Energy+.idd",
      "idf_file_path": "EnergyPlus/Minimal.idf",
      "output_idf_dir": "output_IDFs",
      "run_simulations": true,
      "simulate_config": {
        "num_workers": 4,
        "ep_force_overwrite": true
      },
      "post_process": false,
      "post_process_config": {
        "base_output_dir": "Sim_Results",
        "outputs": [
          {
            "convert_to_daily": true,
            "convert_to_monthly": false,
            "aggregator": "none",
            "output_csv": "output/results/merged_as_is.csv"
          },
          {
            "convert_to_daily": true,
            "convert_to_monthly": false,
            "aggregator": "mean",
            "output_csv": "output/results/merged_daily_mean.csv"
          },
          {
            "convert_to_daily": true,
            "convert_to_monthly": true,
            "aggregator": "mean",
            "output_csv": "output/results/merged_monthly_mean.csv"
          }
        ]
      },

    
      "output_definitions": {
        "desired_variables": [
          "Facility Total Electric Demand Power",
          "Zone Air Temperature",
          "Boiler Heating Energy",
          "Water Heater Heating Energy"
        ],
        "desired_meters": [
          "Electricity:Facility",
          "Heating:EnergyTransfer",
          "Cooling:EnergyTransfer"
        ],
        "override_variable_frequency": "Daily",
        "override_meter_frequency": "Daily",
        "include_tables": true,
        "include_summary": true
      }
    },



 "parsing": {
      "perform_parsing": true,
      "parse_after_simulation": true,
      "parse_mode": "all",
      "parse_types": {
        "idf": true,
        "sql": true
      },
      "categories": null,
      "validate_outputs": true,
      "batch_size": 100,
      "parallel_parsing": false,
      "save_raw_objects": true,
      "output_options": {
        "save_summary": true,
        "save_by_category": true,
        "save_by_building": true
      }
    },












    "structuring": {
      "perform_structuring": true,
      "dhw": {
        "csv_in": "assigned/assigned_dhw_params.csv",
        "csv_out": "assigned/structured_dhw_params.csv"
      },
      "fenestration": {
        "csv_in": "assigned/assigned_fenez_params.csv",
        "csv_out": "assigned/structured_fenez_params.csv"
      },
      "hvac": {
        "csv_in": "assigned/assigned_hvac_params.csv",
        "build_out": "assigned/assigned_hvac_building.csv",
        "zone_out": "assigned/assigned_hvac_zones.csv"
      },
      "vent": {
        "csv_in": "assigned/assigned_ventilation.csv",
        "build_out": "assigned/assigned_vent_building.csv",
        "zone_out": "assigned/assigned_vent_zones.csv"
      },
      "shading": {
        "csv_in": "assigned/assigned_shading_params.csv",
        "csv_out": "assigned/structured_shading_params.csv"
      },
      "equipment": {
        "csv_in": "assigned/assigned_equipment.csv",
        "csv_out": "assigned/structured_equipment.csv"
      },
      "zone_sizing": {
        "csv_in": "assigned/assigned_zone_sizing_outdoor_air.csv",
        "csv_out": "assigned/structured_zone_sizing.csv"
      }
    },












"modification": {
    "perform_modification": true,
    "base_idf_selection": {
        "method": "specific",
        "building_ids": [413673000, 4136731, 4136733]
    },
    "modification_strategy": {
        "type": "scenarios",
        "num_variants": 5,
        "seed": 42,
        "sampling_method": "latin_hypercube"
    },
    "categories_to_modify": {
        "hvac": {
            "enabled": true,
            "strategy": "efficiency_improvement",
            "parameters": {
                "cooling_cop": {
                    "method": "multiplier",
                    "range": [1.2, 1.5]
                },
                "heating_efficiency": {
                    "method": "multiplier", 
                    "range": [1.1, 1.3]
                },
                "fan_efficiency": {
                    "method": "absolute",
                    "value": 0.9
                }
            }
        },
        "lighting": {
            "enabled": true,
            "strategy": "led_retrofit",
            "parameters": {
                "watts_per_area": {
                    "method": "multiplier",
                    "factor": 0.5
                }
            }
        },
        "infiltration": {
            "enabled": true,
            "strategy": "envelope_tightening",
            "parameters": {
                "air_changes_per_hour": {
                    "method": "multiplier",
                    "range": [0.3, 0.6]
                }
            }
        },
        "materials": {
            "enabled": true,
            "strategy": "super_insulation",
            "parameters": {
                "conductivity": {
                    "method": "multiplier",
                    "factor": 0.5
                }
            }
        },
        "equipment": {
            "enabled": true,
            "strategy": "energy_star",
            "parameters": {
                "watts_per_area": {
                    "method": "multiplier",
                    "factor": 0.75
                }
            }
        },
        "dhw": {
            "enabled": false,
            "strategy": "high_efficiency_water_heater",
            "parameters": {}
        },
        "ventilation": {
            "enabled": true,
            "strategy": "demand_controlled_ventilation",
            "parameters": {
                "outdoor_air_per_person": {
                    "method": "absolute",
                    "value": 0.0025
                }
            }
        },
        "schedules": {
            "enabled": false,
            "strategy": "occupancy_optimization",
            "parameters": {}
        },
        "shading": {
            "enabled": false,
            "strategy": "dynamic_shading",
            "parameters": {}
        }
    },
    "output_options": {
        "save_modified_idfs": true,
        "track_modifications": true,
        "generate_report": true,
        "output_dir": "modified_idfs"
    },
    
    
    
    
    
    "post_modification": {
        "run_simulations": true,  
        "simulation_config": {
            "num_workers": 4,
            "iddfile": "EnergyPlus/Energy+.idd",
            "base_output_dir": "Sim_Results_Modified",
            "epw_assignment": "use_original"  
        }
    }
}
    
    
    
    ,


















"validation": {
    "perform_validation": true,
    "config": {
        "real_data_path": "data/test_validation_data/measured_data_parsed_format_daily.csv"
    }
},






















    "validation_base": {
      "perform_validation": true,
      "config": {
        "real_data_csv": "data/mock_merged_daily_mean.csv",
        "sim_data_csv": "results/merged_daily_mean.csv",
        "bldg_ranges": {
          "0": [
            0,
            1,
            2,
            3
          ]
        },
        "variables_to_compare": [
          "Electricity:Facility [J](Hourly)",
          "Heating:EnergyTransfer [J](Hourly)",
          "Cooling:EnergyTransfer [J](Hourly)"
        ],
        "threshold_cv_rmse": 30.0,
        "skip_plots": true,
        "output_csv": "validation_report_base.csv",
        "analysis_options": {
          "date_format": [
            "%d/%m/%Y %H:%M",
            "%d/%m/%y",
            "%Y-%m-%d %H:%M:%S"
          ],
          "granularity": [
            "annual",
            "monthly",
            "seasonal"
          ],
          "weekday_weekend": true,
          "diurnal_profiles": true,
          "peak_analysis": {
            "perform": true,
            "n_peaks": 10
          },
          "ramp_rate_analysis": true,
          "extreme_day_analysis": {
            "perform": true,
            "n_days": 5,
            "weather_variable": "Environment:Site Outdoor Air Drybulb Temperature [C](Daily)"
          }
        }
      }
    },
    "validation_scenarios": {
      "perform_validation": false,
      "config": {
        "real_data_csv": "data/mock_merged_daily_mean.csv",
        "sim_data_csv": "results_scenarioes/merged_daily_mean_scenarios.csv",
        "bldg_ranges": {
          "0": [
            0,
            1,
            2
          ]
        },
        "variables_to_compare": [
          "Electricity:Facility [J](Hourly)",
          "Heating:EnergyTransfer [J](Hourly)",
          "Cooling:EnergyTransfer [J](Hourly)"
        ],
        "threshold_cv_rmse": 30.0,
        "skip_plots": true,
        "output_csv": "validation_report_scenarios.csv"
      }
    },














"sensitivity": {
    "perform_sensitivity": true,
    
    "// Basic configuration (backward compatible)": "",
    "scenario_folder": "scenarios",
    "method": "correlation",
    "results_csv": "results_scenarioes/merged_daily_mean_scenarios.csv",
    "target_variable": [
      "Heating:EnergyTransfer [J](Hourly)",
      "Cooling:EnergyTransfer [J](Hourly)",
      "Electricity:Facility [J](Hourly)"
    ],
    "output_csv": "sensitivity_output.csv",
    
    "// Enhanced features": "",
    "project_root": ".",
    "output_base_dir": "sensitivity_results",
    
    "// Analysis options": "",
    "perform_building_specific": true,
    "perform_multi_objective": true,
    "perform_hierarchical": true,
    "perform_validation_weighted": true,
    
    "// Building grouping": "",
    "building_groups": {
      "auto_generate": true,
      "group_by": ["building_function", "age_range"],
      "min_buildings_per_group": 3
    },
    
    "// Parameter grouping for hierarchical analysis": "",
    "parameter_groups": {
      "hvac_system": [
        "heating_day_setpoint",
        "cooling_day_setpoint",
        "max_heating_supply_air_temp",
        "min_cooling_supply_air_temp"
      ],
      "envelope": [
        "wall_R_value",
        "roof_R_value",
        "window_U_factor",
        "infiltration_rate"
      ],
      "internal_loads": [
        "lights_wm2",
        "equip_wm2",
        "occupant_density"
      ],
      "dhw_system": [
        "setpoint_c",
        "tank_volume",
        "heater_capacity"
      ]
    },
    
    "// Multi-objective configuration": "",
    "objective_weights": {
      "Heating:EnergyTransfer [J](Hourly)": 0.35,
      "Cooling:EnergyTransfer [J](Hourly)": 0.35,
      "Electricity:Facility [J](Hourly)": 0.30
    },
    
    "// Validation integration": "",
    "validation_csv": "validation_report_base.csv",
    "validation_options": {
      "focus_on_failed": true,
      "failure_threshold": 30.0,
      "weight_method": "inverse_error"
    },
    
    "// Export options": "",
    "export_for_surrogate": true,
    "export_for_calibration": true,
    "export_top_n_parameters": 20,
    
    "// Visualization options": "",
    "generate_visualizations": true,
    "visualization_types": [
      "tornado_diagram",
      "sensitivity_heatmap",
      "building_clusters",
      "multi_objective_scatter"
    ],
    
    "// Time slice configuration (existing feature)": "",
    "time_slice_config": {
      "method": "predefined",
      "predefined_slice": "peak_cooling_months"
    },
    
    "// Parameter filtering (existing feature)": "",
    "file_patterns": ["*hvac*.csv", "*dhw*.csv", "*equipment*.csv"],
    "param_filters": {
      "param_name_contains": ["setpoint", "temperature", "wm2"],
      "exclude_params": ["roughness"]
    }
  }

    
    
    ,
























    
    "// ENHANCED SURROGATE V1": "Uses automated ML and feature selection",
    "surrogate": {
      "perform_surrogate": true,
      "scenario_folder": "scenarios",
      "results_csv": "results_scenarioes/merged_daily_mean_scenarios.csv",
      "target_variable": [
        "Heating:EnergyTransfer [J](Hourly)",
        "Cooling:EnergyTransfer [J](Hourly)",
        "Electricity:Facility [J](Hourly)"
      ],
      "model_out": "enhanced_multi_output_surrogate.joblib",
      "cols_out": "enhanced_multi_output_columns.joblib",
      "test_size": 0.2,
      
      "// Automated ML configuration": "",
      "automated_ml": true,
      "model_types": ["random_forest", "xgboost", "gradient_boosting"],
      "scale_features": true,
      "cv_strategy": "kfold",
      
      "// Feature selection from sensitivity": "",
      "sensitivity_results_path": "enhanced_sensitivity.csv",
      "feature_selection": {
        "method": "correlation",
        "top_n": 20
      },
      
      "// Time aggregation": "",
      "time_aggregation": "sum",
      "save_metadata": true
    },
    
    "// ENHANCED CALIBRATION V1": "Uses PSO and multi-objective optimization",
    "calibration": {
      "perform_calibration": true,
      "scenario_folder": "scenarios",
      "method": "pso",
      "use_surrogate": true,
      "real_data_csv": "data/mock_merged_daily_mean.csv",
      "surrogate_model_path": "enhanced_multi_output_surrogate.joblib",
      "surrogate_columns_path": "enhanced_multi_output_columns.joblib",
      
      "// Multi-variable calibration": "",
      "target_variables": [
        "Heating:EnergyTransfer [J](Hourly)",
        "Cooling:EnergyTransfer [J](Hourly)",
        "Electricity:Facility [J](Hourly)"
      ],
      
      "// PSO configuration": "",
      "algorithm_config": {
        "pso": {
          "n_particles": 50,
          "max_iter": 100,
          "inertia": 0.9,
          "inertia_decay": 0.99,
          "cognitive": 2.0,
          "social": 2.0
        }
      },
      
      "// Multi-objective setup": "",
      "objectives": [
        {
          "target_variable": "Heating:EnergyTransfer [J](Hourly)",
          "metric": "cvrmse",
          "weight": 0.35,
          "tolerance": 25.0
        },
        {
          "target_variable": "Cooling:EnergyTransfer [J](Hourly)",
          "metric": "cvrmse",
          "weight": 0.35,
          "tolerance": 25.0
        },
        {
          "target_variable": "Electricity:Facility [J](Hourly)",
          "metric": "cvrmse",
          "weight": 0.3,
          "tolerance": 20.0
        }
      ],
      
      "// Parameter filtering using sensitivity results": "",
      "subset_sensitivity_csv": "enhanced_sensitivity.csv",
      "top_n_params": 15,
      "calibrate_min_max": true,
      
      "// Validation to prevent overfitting": "",
      "validation": {
        "cross_validate": true,
        "n_folds": 3,
        "overfitting_threshold": 0.15
      },
      
      "output_history_csv": "enhanced_calibration_history.csv",
      "best_params_folder": "calibrated_enhanced",
      "history_folder": "calibrated_enhanced"
    }
  },
  "shading_tree": [
    {
      "building_id": 413673000,
      "param_name": "top_n_buildings",
      "fixed_value": 5
    },
    {
      "building_function": "residential",
      "param_name": "summer_value",
      "min_val": 0.4,
      "max_val": 0.6
    },
    {
      "param_name": "top_n_trees",
      "fixed_value": 3
    }
  ],
  "vent": [
    {
      "building_id": 413673000,
      "param_name": "infiltration_base",
      "min_val": 100.3,
      "max_val": 100.4
    },
    {
      "building_function": "residential",
      "age_range": "1992-2005",
      "param_name": "year_factor",
      "min_val": 21.4,
      "max_val": 21.5
    },
    {
      "building_id": 4136731,
      "param_name": "system_type",
      "fixed_value": "D"
    },
    {
      "building_id": 4136731,
      "param_name": "fan_pressure",
      "min_val": 100,
      "max_val": 120
    }
  ]
}